'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

function storefrontClientFactory({
  params,
  session
}) {
  const {
    api
  } = params;
  return {
    graphql: async (query, options = {}) => {
      const client = new api.clients.Storefront({
        session,
        apiVersion: options.apiVersion
      });
      const apiResponse = await client.request(query, {
        variables: options === null || options === void 0 ? void 0 : options.variables,
        retries: options !== null && options !== void 0 && options.tries ? options.tries - 1 : 0,
        headers: options === null || options === void 0 ? void 0 : options.headers
      });
      return new Response(JSON.stringify(apiResponse));
    }
  };
}

exports.storefrontClientFactory = storefrontClientFactory;
